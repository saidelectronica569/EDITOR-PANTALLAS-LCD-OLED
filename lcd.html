<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LCD Custom Character Editor</title>
<style>
  body {
    font-family: sans-serif;
    background: #eef2ff;
    padding: 20px;
  }
  h2 { color: #2332a1; }
  .grid {
    display: grid;
    grid-template-columns: repeat(5, 30px);
    gap: 4px;
    margin-bottom: 20px;
  }
  .pixel {
    width: 30px;
    height: 30px;
    background: #c9d4ff;
    border-radius: 4px;
    cursor: pointer;
  }
  .pixel.on {
    background: #2eff2e;
  }
  button {
    padding: 8px 12px;
    margin: 5px;
    font-size: 15px;
  }
  textarea {
    width: 100%;
    height: 120px;
    font-size: 15px;
  }
</style>
</head>
<body>

<h2>Editor de Caracteres Para LCD (5x8)</h2>

<div class="grid" id="grid"></div>

<button onclick="clearGrid()">Limpiar</button>
<button onclick="exportArduino()">Exportar a Arduino</button>

<h3>CÃ³digo Arduino:</h3>
<textarea id="arduinoCode" readonly></textarea>

<script>
const grid = document.getElementById('grid');

for (let i = 0; i < 40; i++) {
  const pixel = document.createElement('div');
  pixel.classList.add('pixel');
  pixel.onclick = () => pixel.classList.toggle('on');
  grid.appendChild(pixel);
}

function clearGrid() {
  document.querySelectorAll('.pixel').forEach(p => p.classList.remove('on'));
}

function exportArduino() {
  const pixels = [...document.querySelectorAll('.pixel')];
  let rows = [];

  for (let r = 0; r < 8; r++) {
    let value = 0;
    for (let c = 0; c < 5; c++) {
      const index = r*5 + c;
      if (pixels[index].classList.contains('on')) {
        value |= (1 << (4 - c));
      }
    }
    rows.push(value);
  }

  let code = 
`byte customChar[8] = {
  ${rows.map(v => v + ",").join("\n  ")}
};

lcd.createChar(0, customChar);
lcd.setCursor(0,0);
lcd.write(0);`;

  document.getElementById('arduinoCode').value = code;
}
</script>

</body>
</html>